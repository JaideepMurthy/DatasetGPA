<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DatasetGPA</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js"></script>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
</head>
<body>
    <div id="root"></div>
    <script>
        const { useState } = React;

        function DatasetGPA() {
            const [file, setFile] = useState(null);
            const [data, setData] = useState([]);
            const [error, setError] = useState(null);
            const [loading, setLoading] = useState(false);
            const [analysis, setAnalysis] = useState(null);

            const handleFileSelect = (selectedFile) => {
                if (!selectedFile) return;
                if (!selectedFile.name.endsWith('.csv')) {
                    setError('Please upload a CSV file');
                    return;
                }
                setFile(selectedFile);
                setLoading(true);
                setError(null);

                Papa.parse(selectedFile, {
                    header: true,
                    dynamicTyping: true,
                    skipEmptyLines: true,
                    complete: (results) => {
                        if (results.data.length === 0) {
                            setError('CSV file is empty');
                            setLoading(false);
                            return;
                        }
                        setData(results.data);
                        performAnalysis(results.data, results.meta.fields || Object.keys(results.data[0] || {}));
                        setLoading(false);
                    },
                    error: (err) => {
                        setError(`Error: ${err.message}`);
                        setLoading(false);
                    }
                });
            };

            const performAnalysis = (rows, headers) => {
                const totalRows = rows.length;
                const totalCols = headers.length;
                let missingCount = 0;
                rows.forEach(row => {
                    headers.forEach(header => {
                        if (!row[header]) missingCount++;
                    });
                });
                const missingPercent = ((missingCount / (totalRows * totalCols)) * 100).toFixed(2);
                let score = 100 - (parseFloat(missingPercent) * 0.5);
                score = Math.max(0, Math.min(100, score));
                setAnalysis({
                    rows: totalRows,
                    cols: totalCols,
                    missingPercent,
                    score: Math.round(score),
                    grade: score >= 80 ? 'A' : score >= 60 ? 'B' : 'C'
                });
            };

            const resetState = () => {
                setFile(null);
                setData([]);
                setError(null);
                setAnalysis(null);
            };

            if (!file) {
                return React.createElement(
                    'div',
                    { className: 'min-h-screen bg-gradient-to-br from-blue-50 to-purple-50 p-8' },
                    React.createElement('div', { className: 'max-w-2xl mx-auto' },
                        React.createElement('div', { className: 'bg-white rounded-lg shadow-lg p-12' },
                            React.createElement('h1', { className: 'text-4xl font-bold text-center mb-4 text-blue-600' }, 'DatasetGPA'),
                            React.createElement('p', { className: 'text-center text-gray-600 mb-8' }, 'AI-Powered Dataset Quality Analyzer'),
                            React.createElement('div', { className: 'border-2 border-dashed border-gray-300 rounded-lg p-8 text-center cursor-pointer hover:border-blue-400' },
                                React.createElement('input', { type: 'file', accept: '.csv', onChange: (e) => handleFileSelect(e.target.files[0]), style: { display: 'none' }, id: 'file-input', disabled: loading }),
                                React.createElement('label', { htmlFor: 'file-input', className: 'cursor-pointer block' },
                                    React.createElement('div', { className: 'text-5xl mb-4' }, 'ðŸ“'),
                                    React.createElement('p', { className: 'text-lg font-medium mb-2' }, loading ? 'Processing...' : 'Click or drag CSV file here'),
                                    React.createElement('p', { className: 'text-sm text-gray-500' }, 'Max 50MB')
                                )
                            ),
                            error && React.createElement('div', { className: 'mt-4 p-4 bg-red-50 border border-red-200 rounded text-red-700' }, 'âŒ ' + error)
                        )
                    )
                );
            }

            return React.createElement(
                'div',
                { className: 'min-h-screen bg-gradient-to-br from-blue-50 to-purple-50 p-8' },
                React.createElement('div', { className: 'max-w-2xl mx-auto' },
                    React.createElement('div', { className: 'bg-white rounded-lg shadow-lg p-8' },
                        React.createElement('div', { className: 'flex justify-between items-center mb-8' },
                            React.createElement('div', null,
                                React.createElement('h2', { className: 'text-2xl font-bold' }, file.name),
                                React.createElement('p', { className: 'text-gray-600 text-sm' }, `${data.length} rows | ${Object.keys(data[0] || {}).length} columns`)
                            ),
                            React.createElement('button', { onClick: resetState, className: 'px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600' }, 'New File')
                        ),
                        analysis && React.createElement(
                            React.Fragment,
                            null,
                            React.createElement('div', { className: 'bg-blue-50 rounded-lg p-6 mb-6 border-2 border-blue-200' },
                                React.createElement('p', { className: 'text-center text-gray-700 mb-2' }, 'Health Score'),
                                React.createElement('div', { className: 'text-center' },
                                    React.createElement('span', { className: 'text-6xl font-bold text-blue-600' }, analysis.score),
                                    React.createElement('span', { className: 'text-2xl text-gray-600 ml-2' }, '/100')
                                ),
                                React.createElement('p', { className: 'text-center mt-2 text-lg font-bold px-3 py-1 bg-blue-200 inline-block rounded w-full' }, `Grade: ${analysis.grade}`)
                            ),
                            React.createElement('div', { className: 'grid grid-cols-3 gap-4 mb-6' },
                                React.createElement('div', { className: 'bg-blue-50 p-4 rounded border border-blue-200 text-center' },
                                    React.createElement('p', { className: 'text-gray-600 text-sm' }, 'Rows'),
                                    React.createElement('p', { className: 'text-2xl font-bold text-blue-900' }, analysis.rows)
                                ),
                                React.createElement('div', { className: 'bg-purple-50 p-4 rounded border border-purple-200 text-center' },
                                    React.createElement('p', { className: 'text-gray-600 text-sm' }, 'Columns'),
                                    React.createElement('p', { className: 'text-2xl font-bold text-purple-900' }, analysis.cols)
                                ),
                                React.createElement('div', { className: 'bg-red-50 p-4 rounded border border-red-200 text-center' },
                                    React.createElement('p', { className: 'text-gray-600 text-sm' }, 'Missing %'),
                                    React.createElement('p', { className: 'text-2xl font-bold text-red-900' }, analysis.missingPercent + '%')
                                )
                            )
                        ),
                        data.length > 0 && React.createElement('div', { className: 'bg-blue-50 border border-blue-200 rounded p-4' },
                            React.createElement('h3', { className: 'font-bold text-blue-900 mb-4' }, 'Data Preview'),
                            React.createElement('div', { className: 'overflow-x-auto' },
                                React.createElement('table', { className: 'w-full text-sm' },
                                    React.createElement('thead', { className: 'bg-blue-200' },
                                        React.createElement('tr', null,
                                            Object.keys(data[0] || {}).slice(0, 5).map((col) => React.createElement('th', { className: 'px-3 py-2 text-left' }, col))
                                        )
                                    ),
                                    React.createElement('tbody', null,
                                        data.slice(0, 3).map((row, i) => React.createElement(
                                            'tr',
                                            { key: i, className: 'border-t' },
                                            Object.keys(data[0] || {}).slice(0, 5).map((col) => React.createElement('td', { className: 'px-3 py-2' }, String(row[col] || '-').substring(0, 25)))
                                        ))
                                    )
                                )
                            )
                        )
                    )
                )
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(React.createElement(DatasetGPA));
    </script>
</body>
</html>
